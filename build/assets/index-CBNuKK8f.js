import{A as G,p as l,n as q,_ as $,a as z,m as M,q as O,c as _,b as N,f as m,w as g,k as U,i as w,d as F,F as H,l as J,o as n,j as S,e as C,t as V}from"./index-C21QBsiF.js";import{E as K}from"./infinite-scroll-YKaLT3GX.js";import{E as Q,a as W}from"./tab-pane-8VlUrEMt.js";import{E as X,a as Y}from"./breadcrumb-item-Dhhnr_9X.js";import"./loading-CGajl1LS.js";import{G as Z}from"./GoodsItem-DJz7h1kH.js";import{E as x}from"./index-CaQOmUPQ.js";import"./error-Cq9Fpw4b.js";import"./scroll-CukLtUPd.js";import"./throttle-BREGSn40.js";import"./debounce-Df37x29G.js";import"./strings-it8zWZhJ.js";import"./event-BB_Ol6Sd.js";import"./index-CTTDCIsU.js";import"./vnode-Q9N6AeCy.js";const ee=r=>G({url:"/category/sub/filter",params:{id:r}}),B=r=>G({url:"/category/goods/temporary",method:"post",data:r}),te=()=>{const r=l([]);return{subCategoryFilterData:r,getSubCategoryFilter:async a=>{const c=x.service({lock:!0,text:"正在加载中😍😍😍",background:"rgba(0, 0, 0, 0.1)"}),d=await ee(a);r.value=d.result,c.close()}}},ae=()=>{const r=q(),i=l([]),a=l({categoryId:r.params.id,page:1,pageSize:20,sortField:"publishTime"}),c=async()=>{const u=x.service({lock:!0,text:"正在加载中😍😍😍",background:"rgba(0, 0, 0, 0.1)"});console.log(a.value);const L=await B(a.value);i.value=L.result.items,u.close()},d=u=>{a.value.sortField=u,a.value.page=1,c()},y=l(!1),v=l(!1);return{goodList:i,reqData:a,changeReqData:d,load:async()=>{v.value=!0,a.value.page++;const u=await B(a.value);i.value=[...i.value,...u.result.items],v.value=!1,u.result.items.length===0&&(y.value=!0)},disabled:y,loading:v,getGoodList:c}},oe={class:"container"},se={class:"bread-container"},le={class:"sub-container"},re=["infinite-scroll-disabled"],ne={key:1,class:"more"},ie={key:2,class:"more"},ue=Object.assign({name:"SubCategory"},{__name:"index",setup(r){const i=q(),{subCategoryFilterData:a,getSubCategoryFilter:c}=te(),{goodList:d,changeReqData:y,load:v,disabled:E,loading:u,getGoodList:L}=ae(),T=l("publishTime"),h=l({}),o=l([]),{searchGoods:t}=z(),p=l(!1),I=async e=>{p.value=!1,e==="酒"?o.value=[...t.wine.red,...t.wine.white,...t.wine.other]:e==="红酒"?o.value=[...t.wine.red]:e==="白酒"?o.value=[...t.wine.white]:e==="数码"?o.value=[...t.digital.line,...t.digital.ear,...t.digital.other]:e==="数据线"?o.value=[...t.digital.line]:e==="耳机"?o.value=[...t.digital.ear]:e==="乐器"||e==="吉他"?o.value=[...t.music.guitar]:e==="头盔"?o.value=[...t.helmet.helmets]:(p.value=!0,await c(e),await L(),h.value=a.value,o.value=d.value)},b=l(!1);M(()=>{b.value=!1;const e=x.service({lock:!0,text:"正在加载中😍😍😍",background:"rgba(0, 0, 0, 0.1)"});I(i.params.id),setTimeout(()=>{e.close(),b.value=!0},500)}),O(()=>i.params.id,e=>{b.value=!1;const s=x.service({lock:!0,text:"正在加载中😍😍😍",background:"rgba(0, 0, 0, 0.1)"});I(e),setTimeout(()=>{s.close(),b.value=!0},500)});const j=async()=>{await v(),o.value=d.value};return(e,s)=>{const k=Y,A=X,D=W,P=Q,R=K;return n(),_("div",oe,[N("div",se,[m(A,{separator:">"},{default:g(()=>[m(k,{to:{path:"/"}},{default:g(()=>s[2]||(s[2]=[C("首页")])),_:1}),p.value?(n(),S(k,{key:0,to:{path:`/category/${h.value.parentId}`}},{default:g(()=>[C(V(h.value.parentName),1)]),_:1},8,["to"])):w("",!0),p.value?(n(),S(k,{key:1},{default:g(()=>[C(V(h.value.name),1)]),_:1})):(n(),S(k,{key:2},{default:g(()=>s[3]||(s[3]=[C("搜索")])),_:1}))]),_:1})]),N("div",le,[m(P,{modelValue:T.value,"onUpdate:modelValue":s[0]||(s[0]=f=>T.value=f),onTabChange:s[1]||(s[1]=f=>F(y)(T.value))},{default:g(()=>[m(D,{label:"最新商品",name:"publishTime"}),m(D,{label:"最高人气",name:"orderNum"}),m(D,{label:"评论最多",name:"evaluateNum"})]),_:1},8,["modelValue"]),b.value?U((n(),_("div",{key:0,class:"body","infinite-scroll-disabled":F(E)},[(n(!0),_(H,null,J(o.value,f=>(n(),S(Z,{key:f.id,goods:f},null,8,["goods"]))),128))],8,re)),[[R,p.value?j:()=>{}]]):w("",!0),F(u)?(n(),_("div",ne,"加载中。。。😂😂")):w("",!0),F(E)?(n(),_("div",ie,"没有更多了😘😘")):w("",!0)])])}}}),Ce=$(ue,[["__scopeId","data-v-5b1c4131"]]);export{Ce as default};
