import{h as V}from"./user-B09vwgLD.js";import{u as R,E as A}from"./search-By94AY2l.js";import{E as $,a as z}from"./tab-pane-CWbiTKxr.js";import{E as M,a as O}from"./breadcrumb-item-lXIoKH_c.js";import{l as r,x as B,_ as U,k as H,m as J,c as _,a as I,d,w as m,i as K,g as L,u as f,F as Q,j as W,o as l,h as k,b as F,t as N}from"./index-DsM5QmqD.js";import{G as X}from"./GoodsItem-B37hbbu0.js";import"./loading-DA6otzSy.js";import{E as G}from"./index-BCqg8NeN.js";import"./error-Cq9Fpw4b.js";import"./scroll-C1TE8oWP.js";import"./throttle-BNwg__3o.js";import"./debounce-CJKWcNqm.js";import"./strings-XoMxCkFC.js";import"./event-BB_Ol6Sd.js";import"./index-Cvu2DT84.js";import"./vnode-4Ur0teIC.js";const Y=s=>V({url:"/category/sub/filter",params:{id:s}}),T=s=>V({url:"/category/goods/temporary",method:"post",data:s}),Z=()=>{const s=r([]);return{subCategoryFilterData:s,getSubCategoryFilter:async a=>{const c=G.service({lock:!0,text:"正在加载中😍😍😍",background:"rgba(0, 0, 0, 0.1)"}),g=await Y(a);s.value=g.result,c.close()}}},ee=()=>{const s=B(),i=r([]),a=r({categoryId:s.params.id,page:1,pageSize:20,sortField:"publishTime"}),c=async()=>{const n=G.service({lock:!0,text:"正在加载中😍😍😍",background:"rgba(0, 0, 0, 0.1)"});console.log(a.value);const C=await T(a.value);i.value=C.result.items,n.close()},g=n=>{a.value.sortField=n,a.value.page=1,c()},y=r(!1),v=r(!1);return{goodList:i,reqData:a,changeReqData:g,load:async()=>{v.value=!0,a.value.page++;const n=await T(a.value);i.value=[...i.value,...n.result.items],v.value=!1,n.result.items.length===0&&(y.value=!0)},disabled:y,loading:v,getGoodList:c}},te={class:"container"},ae={class:"bread-container"},oe={class:"sub-container"},se=["infinite-scroll-disabled"],le={key:0,class:"more"},re={key:1,class:"more"},ie=Object.assign({name:"SubCategory"},{__name:"index",setup(s){const i=B(),{subCategoryFilterData:a,getSubCategoryFilter:c}=Z(),{goodList:g,changeReqData:y,load:v,disabled:S,loading:n,getGoodList:C}=ee(),E=r("publishTime"),h=r({}),o=r([]),{searchGoods:t}=R(),p=r(!1),D=async e=>{p.value=!1,e==="酒"?o.value=[...t.wine.red,...t.wine.white,...t.wine.other]:e==="红酒"?o.value=[...t.wine.red]:e==="白酒"?o.value=[...t.wine.white]:e==="数码"?o.value=[...t.digital.line,...t.digital.ear,...t.digital.other]:e==="数据线"?o.value=[...t.digital.line]:e==="耳机"?o.value=[...t.digital.ear]:e==="乐器"||e==="吉他"?o.value=[...t.music.guitar]:e==="头盔"?o.value=[...t.helmet.helmets]:(p.value=!0,await c(e),await C(),h.value=a.value,o.value=g.value)};return H(()=>{D(i.params.id)}),J(()=>i.params.id,e=>{D(e)}),(e,u)=>{const w=O,j=M,x=z,q=$,P=A;return l(),_("div",te,[I("div",ae,[d(j,{separator:">"},{default:m(()=>[d(w,{to:{path:"/"}},{default:m(()=>u[2]||(u[2]=[F("首页")])),_:1}),p.value?(l(),k(w,{key:0,to:{path:`/category/${h.value.parentId}`}},{default:m(()=>[F(N(h.value.parentName),1)]),_:1},8,["to"])):L("",!0),p.value?(l(),k(w,{key:1},{default:m(()=>[F(N(h.value.name),1)]),_:1})):(l(),k(w,{key:2},{default:m(()=>u[3]||(u[3]=[F("搜索")])),_:1}))]),_:1})]),I("div",oe,[d(q,{modelValue:E.value,"onUpdate:modelValue":u[0]||(u[0]=b=>E.value=b),onTabChange:u[1]||(u[1]=b=>f(y)(E.value))},{default:m(()=>[d(x,{label:"最新商品",name:"publishTime"}),d(x,{label:"最高人气",name:"orderNum"}),d(x,{label:"评论最多",name:"evaluateNum"})]),_:1},8,["modelValue"]),K((l(),_("div",{class:"body","infinite-scroll-disabled":f(S)},[(l(!0),_(Q,null,W(o.value,b=>(l(),k(X,{key:b.id,goods:b},null,8,["goods"]))),128))],8,se)),[[P,p.value?f(v):""]]),f(n)?(l(),_("div",le,"加载中。。。😂😂")):L("",!0),f(S)?(l(),_("div",re,"没有更多了😘😘")):L("",!0)])])}}}),Se=U(ie,[["__scopeId","data-v-41d4e31e"]]);export{Se as default};
