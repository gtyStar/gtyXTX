import{h as D,E as w}from"./user-BkJRfpxS.js";import{E as H}from"./button-B0L1SATw.js";import"./input-CE8MQ6qx.js";import{E as M}from"./input-number-D6hhgYNB.js";import{_ as L,y as O,p as k,j as x,c as u,a as t,t as l,F as E,i as C,g as F,w as d,h as T,f as V,r as q,m as N,o as a,v as B,d as n,Q as J,b as i,R as Q,e as U}from"./index-CivuXavm.js";import{E as X,a as K}from"./breadcrumb-item-Czd27Eaz.js";import{u as W,E as Y}from"./cartStore-CT-HLJeU.js";import"./loading-BYvfYDAU.js";import{E as $}from"./index-Ce8KWJUU.js";import"./event-BB_Ol6Sd.js";import"./error-Cq9Fpw4b.js";import"./vnode-BTiO0fxo.js";import"./focus-trap-DpGIcNYQ.js";import"./scroll-DgZve-kz.js";const Z=p=>D({url:"/goods",params:{id:p}}),tt=(p,r)=>D({url:"/goods/hot",params:{id:p,type:r,limit:3}}),st={class:"goods-hot"},et={alt:""},ot={class:"name ellipsis"},lt={class:"desc ellipsis"},nt={class:"price"},at={__name:"DetailHot",props:{type:{type:Number,default:1}},setup(p){const r=p,e={1:"24小时热榜",2:"周热榜"},g=O(()=>e[r.type]),_=N(),v=k([]),m=async()=>{const f=await tt(_.params.id,r.type);v.value=f.result};return x(()=>{m()}),(f,I)=>{const y=q("RouterLink"),b=V("img-lazy");return a(),u("div",st,[t("h3",null,l(g.value),1),(a(!0),u(E,null,C(v.value,o=>(a(),F(y,{key:o.id,to:`/detail/${o.id}`,class:"goods-item"},{default:d(()=>[T(t("img",et,null,512),[[b,o.picture]]),t("p",ot,l(o.name),1),t("p",lt,l(o.desc),1),t("p",nt,"¥"+l(o.price),1)]),_:2},1032,["to"]))),128))])}}},P=L(at,[["__scopeId","data-v-2ce27a1b"]]),it={class:"xtx-goods-page"},ut={key:0,class:"container"},rt={class:"bread-container"},ct={class:"info-container"},dt={class:"goods-info"},pt={class:"media"},_t={class:"goods-sales"},mt={class:"spec"},gt={class:"g-name"},vt={class:"g-desc"},ft={class:"g-price"},ht={class:"goods-footer"},yt={class:"goods-article"},bt={class:"goods-tabs"},kt={class:"goods-detail"},xt={class:"attrs"},Et={class:"dt"},Ct={class:"dd"},It={class:"goods-aside"},wt={key:1,class:"loading"},Bt=Object.assign({name:"DetailPage"},{__name:"index",setup(p){const r=N(),e=k({}),g=async()=>{const o=await Z(r.params.id);e.value=o.result};x(()=>{g()});let _={};const v=o=>{console.log(o),_=o},m=k(1),f=o=>{o.value=o},I=W(),y=U(),b=()=>{if(JSON.parse(localStorage.getItem("user")).token){Y.confirm("要去登录吗","您还没有登录呢",{confirmButtonText:"去登录",cancelButtonText:"再逛逛",type:"warning"}).then(()=>{y.push({path:"/login",query:{path:r.fullPath}})}).catch(()=>{});return}_.skuId?(I.addCart({id:e.value.id,name:e.value.name,picture:e.value.mainPictures[0],price:e.value.price,count:m.value,skuId:_.skuId,attrsText:_.specsText,selected:!0}),w.success("加入购物车成功")):w.warning("请选择规格")};return x(()=>{const o=$.service({lock:!0,text:"正在加载中😍😍😍",background:"rgba(0, 0, 0, 0.1)"});B(()=>e.value.categories,s=>{s&&o.close()})}),B(()=>r.params.id,async o=>{const s=$.service({lock:!0,text:"正在加载中😍😍😍",background:"rgba(0, 0, 0, 0.1)"});await g(),s.close()}),(o,s)=>{const h=K,S=X,z=J,R=Q,j=M,A=H,G=V("img-lazy");return a(),u("div",it,[e.value.categories?(a(),u("div",ut,[t("div",rt,[n(S,{separator:">"},{default:d(()=>[n(h,{to:{path:"/"}},{default:d(()=>s[1]||(s[1]=[i("首页")])),_:1}),n(h,{to:{path:`/category/${e.value.categories[1].id}`}},{default:d(()=>[i(l(e.value.categories[1].name),1)]),_:1},8,["to"]),n(h,{to:{path:`/category/sub/${e.value.categories[0].id}`}},{default:d(()=>[i(l(e.value.categories[0].name),1)]),_:1},8,["to"]),n(h,null,{default:d(()=>[i(l(e.value.name),1)]),_:1})]),_:1})]),t("div",ct,[t("div",null,[t("div",dt,[t("div",pt,[n(z,{imageList:e.value.mainPictures},null,8,["imageList"]),t("ul",_t,[t("li",null,[s[2]||(s[2]=t("p",null,"销量人气",-1)),t("p",null,l(e.value.salesCount)+"+ ",1),s[3]||(s[3]=t("p",null,[t("i",{class:"iconfont icon-task-filling"}),i("销量人气")],-1))]),t("li",null,[s[4]||(s[4]=t("p",null,"商品评价",-1)),t("p",null,l(e.value.commentCount)+"+",1),s[5]||(s[5]=t("p",null,[t("i",{class:"iconfont icon-comment-filling"}),i("查看评价")],-1))]),t("li",null,[s[6]||(s[6]=t("p",null,"收藏人气",-1)),t("p",null,l(e.value.collectCount)+"+",1),s[7]||(s[7]=t("p",null,[t("i",{class:"iconfont icon-favorite-filling"}),i("收藏商品")],-1))]),t("li",null,[s[8]||(s[8]=t("p",null,"品牌信息",-1)),t("p",null,l(e.value.brand.name),1),s[9]||(s[9]=t("p",null,[t("i",{class:"iconfont icon-dynamic-filling"}),i("品牌主页")],-1))])])]),t("div",mt,[t("p",gt,l(e.value.name),1),t("p",vt,l(e.value.desc),1),t("p",ft,[t("span",null,l(e.value.oldPrice),1),t("span",null,l(e.value.price),1)]),s[11]||(s[11]=t("div",{class:"g-service"},[t("dl",null,[t("dt",null,"促销"),t("dd",null,"12月好物放送，App领券购买直降120元")]),t("dl",null,[t("dt",null,"服务"),t("dd",null,[t("span",null,"无忧退货"),t("span",null,"快速退款"),t("span",null,"免费包邮"),t("a",{href:"javascript:;"},"了解详情")])])],-1)),n(R,{goods:e.value,onChange:v},null,8,["goods"]),n(j,{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=c=>m.value=c),onChange:f},null,8,["modelValue"]),t("div",null,[n(A,{size:"large",class:"btn",onClick:b},{default:d(()=>s[10]||(s[10]=[i(" 加入购物车 ")])),_:1})])])]),t("div",ht,[t("div",yt,[t("div",bt,[s[12]||(s[12]=t("nav",null,[t("a",null,"商品详情")],-1)),t("div",kt,[t("ul",xt,[(a(!0),u(E,null,C(e.value.details.properties,c=>(a(),u("li",{key:c.value},[t("span",Et,l(c.name),1),t("span",Ct,l(c.value),1)]))),128))]),(a(!0),u(E,null,C(e.value.details.pictures,c=>T((a(),u("img",{key:c,alt:""})),[[G,c]])),128))])])]),t("div",It,[n(P,{type:1}),n(P,{type:2})])])])])])):(a(),u("div",wt))])}}}),Mt=L(Bt,[["__scopeId","data-v-2aaf7967"]]);export{Mt as default};
