import{_ as S,u as B,c as u,a as t,b as l,e as r,F as I,k as N,d as m,t as a,w as i,f as $,r as F,o as d,j,i as z,h as R,E as U}from"./index-9_XqmvxG.js";import{v as D}from"./loading-CCfGjxS1.js";import{E as P}from"./empty-fhpilgRb.js";import{E as M}from"./button-D7xLp6cS.js";import{E as O}from"./popover-m0Y1nAoX.js";import"./popper-B7rWmCp6.js";import"./input-j8OgkRJI.js";import{E as T}from"./input-number-EBmk07Mq.js";import{E as q}from"./checkbox-FPL4oyLm.js";import{u as A}from"./cartStore-w8C0TS-j.js";import"./focus-trap-BZqrsTi6.js";import"./event-BB_Ol6Sd.js";import"./error-Cq9Fpw4b.js";import"./isEqual-B7mqLPY1.js";import"./overlay-C9wc3hJS.js";import"./vnode-BK2MTBXB.js";import"./scroll-BX_HJvce.js";const G={class:"xtx-cart-page"},H={class:"container m-top-20"},J={key:0,class:"cart"},K={width:"120"},Q={class:"goods"},W=["src"],X={class:"name ellipsis"},Y={class:"tc"},Z={class:"tc"},tt={class:"tc"},et={class:"f16 red"},ot={class:"tc"},st={class:"action"},nt={class:"batch"},lt={class:"red"},rt={class:"total"},at={key:1,class:"empty"},it={colspan:"6"},dt={class:"cart-none"},ct=Object.assign({name:"CartList"},{__name:"index",setup(ut){const f=B(),s=A(),g=(n,e,p)=>{s.updateCart(n,e,p)},C=n=>{s.delCart([n.skuId])},k=(n,e)=>{console.log(n,e),s.singleCheck(n)},v=n=>{console.log(n),s.allCheck()},_=$(),y=()=>{s.cartList.find(n=>n.selected===!0)?_.push("/checkout"):U({message:"您还未选择选择商品",type:"warning"})};return(n,e)=>{const p=q,x=F("RouterLink"),b=T,E=O,h=M,w=P,L=D;return d(),u("div",G,[t("div",H,[l(s).cartList.length?(d(),u("div",J,[t("table",null,[t("thead",null,[t("tr",null,[t("th",K,[r(p,{"model-value":l(s).allCheckSelected,onChange:v},null,8,["model-value"])]),e[2]||(e[2]=t("th",{width:"400"},"商品信息",-1)),e[3]||(e[3]=t("th",{width:"220"},"单价",-1)),e[4]||(e[4]=t("th",{width:"180"},"数量",-1)),e[5]||(e[5]=t("th",{width:"180"},"小计",-1)),e[6]||(e[6]=t("th",{width:"140"},"操作",-1))])]),t("tbody",null,[(d(!0),u(I,null,N(l(s).cartList,(o,V)=>(d(),u("tr",{key:o.id},[t("td",null,[r(p,{"model-value":o.selected,onChange:c=>k(V,c)},null,8,["model-value","onChange"])]),t("td",null,[t("div",Q,[r(x,{to:"/"},{default:i(()=>[t("img",{src:o.picture,alt:""},null,8,W)]),_:2},1024),t("div",null,[t("p",X,a(o.name),1)])])]),t("td",Y,[t("p",null,"¥"+a(o.price),1)]),t("td",Z,[j(r(b,{min:0,max:o.stock,modelValue:o.count,"onUpdate:modelValue":c=>o.count=c,onChange:c=>g(o.skuId,o.selected,o.count)},null,8,["max","modelValue","onUpdate:modelValue","onChange"]),[[L,o.loading]])]),t("td",tt,[t("p",et,"¥"+a((o.price*o.count).toFixed(2)),1)]),t("td",ot,[t("p",null,[r(E,{title:"确认删除吗?","confirm-button-text":"确认","cancel-button-text":"取消",onConfirm:c=>C(o)},{reference:i(()=>e[7]||(e[7]=[t("a",{href:"javascript:;"},"删除",-1)])),_:2},1032,["onConfirm"])])])]))),128))])]),t("div",st,[t("div",nt,[m(" 共 "+a(l(s).allCount)+" 件商品，已选择 "+a(l(s).selectedCount)+" 件，商品合计： ",1),t("span",lt,"¥ "+a(l(s).selectedPrice.toFixed()),1)]),t("div",rt,[r(h,{size:"large",type:"primary",onClick:y},{default:i(()=>e[8]||(e[8]=[m("下单结算")])),_:1})])])])):(d(),u("div",at,[t("table",null,[t("tbody",null,[t("tr",null,[t("td",it,[t("div",dt,[r(w,{description:"购物车列表为空",style:{height:"500px"}},{default:i(()=>[r(h,{size:"large",type:"primary",onClick:e[0]||(e[0]=o=>l(_).push("/"))},{default:i(()=>e[9]||(e[9]=[m("随便逛逛")])),_:1}),l(f).userInfo.token?R("",!0):(d(),z(h,{key:0,size:"large",type:"primary",onClick:e[1]||(e[1]=o=>l(_).push("/login"))},{default:i(()=>e[10]||(e[10]=[m("去登陆")])),_:1}))]),_:1})])])])])])]))])])}}}),Bt=S(ct,[["__scopeId","data-v-23db9826"]]);export{Bt as default};
