import{A as G,m as l,n as q,_ as R,q as $,l as z,p as M,c as f,a as N,e as d,w as m,j as O,h as F,b as y,F as U,k as H,o as n,i as S,d as C,t as V}from"./index-wLM41VPV.js";import{E as J}from"./infinite-scroll-CRPQTlHy.js";import{E as K,a as Q}from"./tab-pane-BtEp9o99.js";import{E as W,a as X}from"./breadcrumb-item-CEJYulZP.js";import"./loading-BYJlnQnE.js";import{G as Y}from"./GoodsItem-RZcd1vi7.js";import{E as x}from"./index-DwKREfYq.js";import"./error-Cq9Fpw4b.js";import"./scroll-CTa12LS4.js";import"./throttle-CbguI2ZB.js";import"./debounce-DFMyQRur.js";import"./strings-bZtV5SKq.js";import"./event-BB_Ol6Sd.js";import"./index-BwkxBfR8.js";import"./vnode-DiS8kaMz.js";const Z=r=>G({url:"/category/sub/filter",params:{id:r}}),B=r=>G({url:"/category/goods/temporary",method:"post",data:r}),ee=()=>{const r=l([]);return{subCategoryFilterData:r,getSubCategoryFilter:async a=>{const c=x.service({lock:!0,text:"正在加载中😍😍😍",background:"rgba(0, 0, 0, 0.1)"}),g=await Z(a);r.value=g.result,c.close()}}},te=()=>{const r=q(),i=l([]),a=l({categoryId:r.params.id,page:1,pageSize:20,sortField:"publishTime"}),c=async()=>{const u=x.service({lock:!0,text:"正在加载中😍😍😍",background:"rgba(0, 0, 0, 0.1)"});console.log(a.value);const L=await B(a.value);i.value=L.result.items,u.close()},g=u=>{a.value.sortField=u,a.value.page=1,c()},h=l(!1),v=l(!1);return{goodList:i,reqData:a,changeReqData:g,load:async()=>{v.value=!0,a.value.page++;const u=await B(a.value);i.value=[...i.value,...u.result.items],v.value=!1,u.result.items.length===0&&(h.value=!0)},disabled:h,loading:v,getGoodList:c}},ae={class:"container"},oe={class:"bread-container"},se={class:"sub-container"},le=["infinite-scroll-disabled"],re={key:1,class:"more"},ne={key:2,class:"more"},ie=Object.assign({name:"SubCategory"},{__name:"index",setup(r){const i=q(),{subCategoryFilterData:a,getSubCategoryFilter:c}=ee(),{goodList:g,changeReqData:h,load:v,disabled:E,loading:u,getGoodList:L}=te(),T=l("publishTime"),k=l({}),o=l([]),{searchGoods:t}=$(),p=l(!1),I=async e=>{p.value=!1,e==="酒"?o.value=[...t.wine.red,...t.wine.white,...t.wine.other]:e==="红酒"?o.value=[...t.wine.red]:e==="白酒"?o.value=[...t.wine.white]:e==="数码"?o.value=[...t.digital.line,...t.digital.ear,...t.digital.other]:e==="数据线"?o.value=[...t.digital.line]:e==="耳机"?o.value=[...t.digital.ear]:e==="乐器"||e==="吉他"?o.value=[...t.music.guitar]:e==="头盔"?o.value=[...t.helmet.helmets]:(p.value=!0,await c(e),await L(),k.value=a.value,o.value=g.value)},b=l(!1);return z(()=>{b.value=!1;const e=x.service({lock:!0,text:"正在加载中😍😍😍",background:"rgba(0, 0, 0, 0.1)"});I(i.params.id),setTimeout(()=>{e.close(),b.value=!0},500)}),M(()=>i.params.id,e=>{b.value=!1;const s=x.service({lock:!0,text:"正在加载中😍😍😍",background:"rgba(0, 0, 0, 0.1)"});I(e),setTimeout(()=>{s.close(),b.value=!0},500)}),(e,s)=>{const w=X,j=W,D=Q,A=K,P=J;return n(),f("div",ae,[N("div",oe,[d(j,{separator:">"},{default:m(()=>[d(w,{to:{path:"/"}},{default:m(()=>s[2]||(s[2]=[C("首页")])),_:1}),p.value?(n(),S(w,{key:0,to:{path:`/category/${k.value.parentId}`}},{default:m(()=>[C(V(k.value.parentName),1)]),_:1},8,["to"])):F("",!0),p.value?(n(),S(w,{key:1},{default:m(()=>[C(V(k.value.name),1)]),_:1})):(n(),S(w,{key:2},{default:m(()=>s[3]||(s[3]=[C("搜索")])),_:1}))]),_:1})]),N("div",se,[d(A,{modelValue:T.value,"onUpdate:modelValue":s[0]||(s[0]=_=>T.value=_),onTabChange:s[1]||(s[1]=_=>y(h)(T.value))},{default:m(()=>[d(D,{label:"最新商品",name:"publishTime"}),d(D,{label:"最高人气",name:"orderNum"}),d(D,{label:"评论最多",name:"evaluateNum"})]),_:1},8,["modelValue"]),b.value?O((n(),f("div",{key:0,class:"body","infinite-scroll-disabled":y(E)},[(n(!0),f(U,null,H(o.value,_=>(n(),S(Y,{key:_.id,goods:_},null,8,["goods"]))),128))],8,le)),[[P,p.value?y(v):""]]):F("",!0),y(u)?(n(),f("div",re,"加载中。。。😂😂")):F("",!0),y(E)?(n(),f("div",ne,"没有更多了😘😘")):F("",!0)])])}}}),Se=R(ie,[["__scopeId","data-v-246b7eed"]]);export{Se as default};
